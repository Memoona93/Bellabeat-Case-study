# %% [code]
---
title: "Bellabeat Case Study with R"
Author: "Memoona Abbas"
output: html_document
editor_options:
number_sections: true
toc: true
---

## Introduction

Hi, this is my very first case study after completing the Google Data Analytics Course. In this case study using the key tasks and guiding questions I will be completing all the Data analysis processes: ask, prepare, process, analyze, share, and act. By the end of this study, I will be able to discover the insights and will then help guide marketing strategy for the company.

### About Company

Bellabeat is a small smart devices company founded in 2013.It is working on women fitness products and thriving to become global in the market. With the new trends in the market, Bellabeat decided to unlock its opportunity with this beautifully designed smart technology by tracking the change in behaviour of the users life-style (Daily activity, sleep, stress, and reproductive health).

#### who owns the company?

Urška Sršen: Bellabeat’s cofounder and Chief Creative Officer ○ Sando Mur: Mathematician and Bellabeat’s cofounder; key member of the Bellabeat executive team.

#### What are the Bellabeat products?

bella beat app, Leaf, Time, spring and bellabeat membership.

since the company wants me to work on one of its product so I am using "Time" to gain the insights of the users Daily activity, sleep cycle, and Stress.

## ASK

-   What is the problem you are trying to solve?

-   How can your insights drive business decisions?

Ans: The problem that I am trying to solve here is to use the data in order to gain insight into how consumers use non-Bellabeat smartdevices.

Ans: since the company has already invested in traditional advertising media, such as radio, out-of-home billboards, print, and television, but focuses on digital marketing extensively and it wants to reveal more opportunities for growth.

## PREPARE

-   Where is your data stored?

    Ans: The data is stored on Kaggle, (CC0: Public Domain, dataset made available through Mobius).

-    How is the data organized? Is it in long or wide format?

-   Ans: The data is large, contains 29 files and is in tabulated form (csv)

-   Are there issues with bias or credibility in this data? Does your data ROCCC?

    Ans: No, the data is credible and recorded using a smart device.

-   How are you addressing licensing, privacy, security, and accessibility?

    Ans: its a public data and can be accessible easily : <https://www.kaggle.com/arashnic/fitbit>.

-   How did you verify the data’s integrity?

    Ans: This dataset is generated by respondents to a distributed survey via Amazon Mechanical Turk and is updated annually.

-   How does it help you answer your question?

    Ans: It includes information about daily activity, steps, and heart rate that can be used to explore human temporal routine behavioral analysis and pattern recognition.

-    Are there any problems with the data?

-   Ans: Contains few unnecessary information, formatting issues in time and date type, empty and incomplete columns. Overall the data is credible and needs a little bit basic fixing (removing duplicates, removing rows and column, formatting types, etc)

### Installing packages

*loading few packages before starting the analysis.*

install.packages("tidyverse")

install.packages("lubridate")

install.packages("dplyr")

install.packages("ggplot2")

install.packages("tidyr")

install.packages("here")

install.packages("skimr")

install.packages("janitor")

### Loading library
library(tidyverse)

library(lubridate)

library(dplyr)

library(ggplot2)

library(tidyr)

library(here)

library(skimr)

library(janitor)

### Importing data

-   Importing dataset of Daily Activity

``` r
DailyActivity <- read_csv("mturkfitbit_export_4.12.16-5.12.16/Fitabase Data 4.12.16-5.12.16/dailyActivity_merged.csv")
```

-   Importing dataset of Daily Calories

    ``` r
    DailyCalories <- read.csv("mturkfitbit_export_4.12.16-5.12.16/Fitabase Data 4.12.16-5.12.16/dailyCalories_merged.csv")
    ```

-   Importing dataset of Intensities

    ``` r
    DailyIntensities <-read.csv("mturkfitbit_export_4.12.16-5.12.16/Fitabase Data 4.12.16-5.12.16/dailyIntensities_merged.csv")
    ```

-   Importing dataset of Heart Rate

    ``` r
    HeartRate <- read.csv("heartrate_seconds_merged.csv")
    ```

-   Importing dataset of Weight Log Info

    ``` r
    WeightLog <-read.csv("mturkfitbit_export_4.12.16-5.12.16/Fitabase Data 4.12.16-5.12.16/weightLogInfo_merged.csv")
    ```

-   Importing dataset of Sleep

    ``` r
    sleepDay <-read.csv("mturkfitbit_export_4.12.16-5.12.16/Fitabase Data 4.12.16-5.12.16/sleepDay_merged.csv")
    ```

## PROCESS

*In this process, I will start cleaning and organize and the data in order to start the analysis.*

-   Found no duplications, errors in any of the datastes except for Sleep data and Weight Log.

-   Removed duplicated rows found at 163, 225 and, 382 from column 'SleepDay' successfully.

-   For WeightLog data, Found one column 'Fat' with incomplete data so, I removed it.

``` r
WeightLog_Info <- WeightLog_Info[,-6]
```

for sleepDay data using separate( ) function to split the date and time.

``` r
sleep_day <- sleepDay %>% 
separate(SleepDay, c("Date", "Time"), " ")
```

splitting date and time for WeightLog data too.

``` r
WeightLog_Info <- WeightLog %>% 
separate(Date, c("Date", "Time"), " ")
```

### ANALYZE 

for DailyActivity:

``` r
DailyActivity %>%} select(TotalSteps, TotalDistance,SedentaryMinutes) %>% summary()
```

TotalSteps TotalDistance SedentaryMinutes Min. : 0 Min. : 0.000 Min. : 0.0\
1st Qu.: 3790 1st Qu.: 2.620 1st Qu.: 729.8\
Median : 7406 Median : 5.245 Median :1057.5\
Mean : 7638 Mean : 5.490 Mean : 991.2\
3rd Qu.:10727 3rd Qu.: 7.713 3rd Qu.:1229.5\
Max. :36019 Max. :28.030 Max. :1440.0

for sleep:

``` r
sleepDay %>%}
select(TotalSleepRecords, TotalMinutesAsleep, TotalTimeInBed) %>%
summary()
```

```         
TotalSleepRecords TotalMinutesAsleep TotalTimeInBed 
 Min.   :1.000     Min.   : 58.0      Min.   : 61.0  
 1st Qu.:1.000     1st Qu.:361.0      1st Qu.:403.0  
 Median :1.000     Median :433.0      Median :463.0  
 Mean   :1.119     Mean   :419.5      Mean   :458.6  
 3rd Qu.:1.000     3rd Qu.:490.0      3rd Qu.:526.0  
 Max.   :3.000     Max.   :796.0      Max.   :961.0  
```

for DailyIntensities:

``` r
DailyIntensities %>%
select(VeryActiveMinutes, FairlyActiveMinutes, LightlyActiveMinutes, SedentaryMinutes) %>%
 summary()
```

```         
VeryActiveMinutes FairlyActiveMinutes LightlyActiveMinutes
 Min.   :  0.00    Min.   :  0.00      Min.   :  0.0       
 1st Qu.:  0.00    1st Qu.:  0.00      1st Qu.:127.0       
 Median :  4.00    Median :  6.00      Median :199.0       
 Mean   : 21.16    Mean   : 13.56      Mean   :192.8       
 3rd Qu.: 32.00    3rd Qu.: 19.00      3rd Qu.:264.0       
 Max.   :210.00    Max.   :143.00      Max.   :518.0       
 SedentaryMinutes
 Min.   :   0.0  
 1st Qu.: 729.8  
 Median :1057.5  
 Mean   : 991.2  
 3rd Qu.:1229.5  
 Max.   :1440.0  
```

for DailyCalories:

``` r
DailyCalories %>%
select(Calories) %>%
summary()
```

```         
Calories   
 Min.   :   0  
 1st Qu.:1828  
 Median :2134  
 Mean   :2304  
 3rd Qu.:2793  
 Max.   :4900
```

for Weight:

``` r
WeightLog_Info %>%
select(WeightKg, BMI) %>%
summary()
```

```         
   WeightKg           BMI       
 Min.   : 52.60   Min.   :21.45  
 1st Qu.: 61.40   1st Qu.:23.96  
 Median : 62.50   Median :24.39  
 Mean   : 72.04   Mean   :25.19  
 3rd Qu.: 85.05   3rd Qu.:25.56  
 Max.   :133.50   Max.   :47.54
```

### Merging the data

``` r
Combined_data_inner <- merge(sleep_day, DailyActivity, by="Id")
n_distinct(Combined_data_inner$Id)
```

24

``` r
Combined_data_outer <- merge(sleep_day, DailyActivity, by="Id",all=TRUE) n_distinct(Combined_data_outer$Id)
```

33

```         
Id      Date     Time TotalSleepRecords TotalMinutesAsleep
1 1503960366 4/12/2016 12:00:00                 1                327
2 1503960366 4/12/2016 12:00:00                 1                327
3 1503960366 4/12/2016 12:00:00                 1                327
4 1503960366 4/12/2016 12:00:00                 1                327
5 1503960366 4/12/2016 12:00:00                 1                327
  TotalTimeInBed TotalSteps TotalDistance TrackerDistance
1            346      11992          7.71            7.71
2            346      12159          8.03            8.03
3            346      10602          6.81            6.81
4            346      14673          9.25            9.25
5            346      13162          8.50            8.50
  LoggedActivitiesDistance VeryActiveDistance ModeratelyActiveDistance
1                        0               2.46                     2.12
2                        0               1.97                     0.25
3                        0               2.29                     1.60
4                        0               3.56                     1.42
5                        0               1.88                     0.55
  LightActiveDistance SedentaryActiveDistance VeryActiveMinutes
1                3.13                       0                37
2                5.81                       0                24
3                2.92                       0                33
4                4.27                       0                52
5                6.06                       0                25
  FairlyActiveMinutes LightlyActiveMinutes SedentaryMinutes Calories
1                  46                  175              833     1821
2                   6                  289              754     1896
3                  35                  246              730     1820
4                  34                  217              712     1947
5                  13                  328              728     1985
```

*Creating New variable to check the users Sleep and Daily Activity routine.*

``` r
DailySleepActivity  <- Combined_data_inner %>%  
  mutate(StepsCategory = case_when(
    .$TotalSteps < 5000 ~ "Inactive",
    .$TotalSteps >= 10000 & .$TotalSteps < 12500 ~ "Active",
    .$TotalSteps >= 5000 & .$TotalSteps < 7500 ~ "Moderately",
    .$TotalSteps >= 12500 ~ "Very Active"),
    SleepQuality = case_when(
    .$TotalMinutesAsleep/60 >= 6 & .$TotalMinutesAsleep/60 <= 8 ~ "Sleeping",
    .$TotalMinutesAsleep/60 < 6 ~ "Not Sleeping",
    .$TotalMinutesAsleep/60 > 8 ~ "Oversleeping"
   ))
```

``` r
head(DailySleepActivity)
```

```         
Id      Date     Time TotalSleepRecords TotalMinutesAsleep
1 1503960366 4/12/2016 12:00:00                 1                327
2 1503960366 4/12/2016 12:00:00                 1                327
3 1503960366 4/12/2016 12:00:00                 1                327
4 1503960366 4/12/2016 12:00:00                 1                327
5 1503960366 4/12/2016 12:00:00                 1                327
6 1503960366 4/12/2016 12:00:00                 1                327
  TotalTimeInBed TotalSteps TotalDistance TrackerDistance
1            346      11992          7.71            7.71
2            346      12159          8.03            8.03
3            346      10602          6.81            6.81
4            346      14673          9.25            9.25
5            346      13162          8.50            8.50
6            346      10735          6.97            6.97
  LoggedActivitiesDistance VeryActiveDistance ModeratelyActiveDistance
1                        0               2.46                     2.12
2                        0               1.97                     0.25
3                        0               2.29                     1.60
4                        0               3.56                     1.42
5                        0               1.88                     0.55
6                        0               1.57                     0.69
  LightActiveDistance SedentaryActiveDistance VeryActiveMinutes
1                3.13                       0                37
2                5.81                       0                24
3                2.92                       0                33
4                4.27                       0                52
5                6.06                       0                25
6                4.71                       0                21
  FairlyActiveMinutes LightlyActiveMinutes SedentaryMinutes Calories
1                  46                  175              833     1821
2                   6                  289              754     1896
3                  35                  246              730     1820
4                  34                  217              712     1947
5                  13                  328              728     1985
6                  19                  217              776     1797
  StepsCategory SleepQuality
1        Active Not Sleeping
2        Active Not Sleeping
3        Active Not Sleeping
4   Very Active Not Sleeping
5   Very Active Not Sleeping
6        Active Not Sleeping
```

## SHARE AND ACT (visualization)

* What is the relationship between steps taken in a day and sedentary minutes?*

``` r
ggplot(data=DailyActivity, aes(x=TotalSteps, y=SedentaryMinutes)) + geom_point() + geom_smooth() + labs(title="Total Steps vs. Sedentary Minutes")
```
![Rplot.png](attachment:d786b9ec-e8eb-4985-894d-9c92dfc15ce6.png)

```         
`geom_smooth()` using method = 'loess' and formula = 'y ~ x'
```

The plot shows the negative relationship with total steps reducing with high sedentary time. The company needs to work on creating a algorithm to encourage the users to walk more. It can be a pop-up notification or a beep to get them notified that they're sitting idle and need to get up to achieve their daily target by taking more steps to unlock their fitness goal.

What is the relationship between minutes asleep and time in bed?

``` r
ggplot(data=sleep_day, aes(x=TotalMinutesAsleep, y=TotalTimeInBed)) + geom_point()+ geom_smooth() + labs(title=" Minutes Asleep vs. Time in Bed Minutes")
```

```         
`geom_smooth()` using method = 'loess' and formula = 'y ~ x'
```
![sleep_day.png](attachment:8a8223d0-90cf-4d1e-96a3-13a48ec71c82.png)


The plot shows a positive relation between the Total time in bed and total minutes asleep.

What is the relationship between steps taken and Calories ?

``` r
ggplot(data=DailyActivity, aes(x=TotalSteps, y=Calories)) + 
geom_point() + geom_smooth() + labs(title="Total Steps vs. Calories")
```
![Rplot02.png](attachment:4e46465c-52a1-44a6-90f8-c6198077d010.png)


The plot shows a positive relations between total steps and calories burned. The company needs to market more on the features to motivate users to get them notified of their health results, and daily maximum steps limit to get them back on track.

What is the overall relationship between Daily sleep Activity, total distanced covered and calories burned?

``` r
ggplot(data = DailySleepActivity) + geom_point(mapping =  aes(x= TotalSteps, y = Calories ,color = SleepQuality)) + labs(title = "Calories Burned Vs. TotalSteps")
ggplot(DailySleepActivity, aes(x=TotalDistance,
  y = Calories,color= SleepQuality)) +
 geom_point() +
 geom_smooth() +
labs(title = "Calories Burned Vs. Total Distance")
```
![Rplot05.png](attachment:a0c50ea8-8418-41dc-8ecc-2ca26874e379.png)

This plot clearly shows the users which are "Not sleeping", "Sleeping", and "Over sleeping". We can clearly see the more blue scatter points which means the users spend more time on sleeping.

## CONCLUSION AND RECOMMENDATION

Considering the last plot of this case studty it is noticed that the users are less motivated to work on their fitness. The company should focus on creating new features in their products to help change the routine of its users. few of these can be helpful:

-   Pop-ups on being inactive

-   motivational quotes/tips on health and fitness

-   loosing weight notifications by tracking their BMI routinely.

-   Daily challenges and rewards to keep them on track.
